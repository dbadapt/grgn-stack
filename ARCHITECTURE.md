# GRGN Stack Architecture

Visual overview of the GRGN Stack architecture and how components interact.

---

## ğŸ—ï¸ High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         GRGN Stack                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              â”‚      â”‚              â”‚      â”‚              â”‚ â”‚
â”‚  â”‚   Frontend   â”‚â—„â”€â”€â”€â”€â–ºâ”‚   Backend    â”‚â—„â”€â”€â”€â”€â–ºâ”‚   Database   â”‚ â”‚
â”‚  â”‚   (React)    â”‚      â”‚     (Go)     â”‚      â”‚   (Neo4j)    â”‚ â”‚
â”‚  â”‚              â”‚      â”‚              â”‚      â”‚              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚       â”‚                      â”‚                      â”‚          â”‚
â”‚   TypeScript            GraphQL API            Graph Schema     â”‚
â”‚   Mantine UI            Gin Framework          Cypher Queries   â”‚
â”‚   TanStack Query        gqlgen                 Migrations       â”‚
â”‚       â”‚                      â”‚                      â”‚          â”‚
â”‚   Port 5173             Port 8080               Port 7687       â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Data Flow

### Query Flow

```
User Interaction
      â†“
React Component
      â†“
TanStack Query Hook
      â†“
GraphQL Query (auto-generated)
      â†“
HTTP Request â†’ Backend :8080/graphql
      â†“
GraphQL Resolver (Go)
      â†“
Repository Layer
      â†“
Neo4j Driver
      â†“
Cypher Query â†’ Neo4j :7687
      â†“
Graph Data
      â†“
[Return path reverses]
      â†“
JSON Response
      â†“
React Component Re-render
```

### Mutation Flow

```
User Action (Click, Submit, etc.)
      â†“
React Event Handler
      â†“
TanStack Mutation Hook
      â†“
GraphQL Mutation (auto-generated)
      â†“
HTTP POST â†’ Backend :8080/graphql
      â†“
GraphQL Resolver (Go)
      â†“
Validation
      â†“
Repository Layer
      â†“
Neo4j Transaction
      â†“
Cypher CREATE/UPDATE/DELETE
      â†“
Commit Transaction
      â†“
Response â†’ Frontend
      â†“
Cache Invalidation
      â†“
UI Update
```

---

## ğŸ“ Layer Architecture

### Frontend (React)

```
web/
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/          # Reusable UI components
â”‚   â”‚   â””â”€â”€ *.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ pages/              # Page components
â”‚   â”‚   â””â”€â”€ *.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ graphql/            # GraphQL queries & generated code
â”‚   â”‚   â”œâ”€â”€ queries.graphql     # Hand-written queries
â”‚   â”‚   â””â”€â”€ generated.ts        # Auto-generated types & hooks
â”‚   â”‚
â”‚   â”œâ”€â”€ config/             # Configuration
â”‚   â”‚   â””â”€â”€ env.ts              # Environment variables
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/              # Custom React hooks
â”‚   â”‚   â””â”€â”€ *.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/              # Utility functions
â”‚   â”‚   â””â”€â”€ *.ts
â”‚   â”‚
â”‚   â””â”€â”€ test/               # Test utilities
â”‚       â””â”€â”€ setup.ts
```

### Backend (Go)

```
backend/
â”‚
â”œâ”€â”€ main.go                 # Application entry point
â”‚
â”œâ”€â”€ cmd/                    # Command-line tools
â”‚   â””â”€â”€ migrate/
â”‚       â””â”€â”€ main.go            # Migration runner
â”‚
â””â”€â”€ internal/               # Internal packages
    â”‚
    â”œâ”€â”€ config/             # Configuration management
    â”‚   â””â”€â”€ config.go          # Viper-based config
    â”‚
    â”œâ”€â”€ database/           # Database layer
    â”‚   â”œâ”€â”€ neo4j.go           # Connection & driver
    â”‚   â””â”€â”€ migrations/        # Database migrations
    â”‚       â”œâ”€â”€ 001_*.go
    â”‚       â”œâ”€â”€ migrator.go
    â”‚       â””â”€â”€ registry.go
    â”‚
    â”œâ”€â”€ graphql/            # GraphQL layer
    â”‚   â”œâ”€â”€ generated.go       # gqlgen generated code
    â”‚   â”œâ”€â”€ model/             # GraphQL models
    â”‚   â”‚   â””â”€â”€ models_gen.go
    â”‚   â””â”€â”€ resolver/          # Resolvers (handlers)
    â”‚       â”œâ”€â”€ resolver.go
    â”‚       â””â”€â”€ schema.resolvers.go
    â”‚
    â””â”€â”€ repository/         # Data access layer
        â””â”€â”€ *_repository.go    # Database operations
```

### Shared Schema

```
schema/
â”‚
â”œâ”€â”€ schema.graphql          # GraphQL API schema
â”‚                              (Single source of truth)
â”‚
â””â”€â”€ graph-models/           # Visual graph models
    â”œâ”€â”€ *.json                 # Arrows.app exports
    â””â”€â”€ README.md
```

---

## ğŸ”Œ Technology Layers

### Layer 1: Frontend (Presentation)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  React Components (Mantine UI)              â”‚
â”‚  â”œâ”€ Buttons, Forms, Tables, etc.            â”‚
â”‚  â””â”€ Responsive, accessible, themeable       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  State Management                           â”‚
â”‚  â”œâ”€ TanStack Query (server state)           â”‚
â”‚  â”œâ”€ React Hooks (local state)               â”‚
â”‚  â””â”€ Auto caching & refetching               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GraphQL Client (auto-generated)            â”‚
â”‚  â”œâ”€ Type-safe queries                       â”‚
â”‚  â”œâ”€ Type-safe mutations                     â”‚
â”‚  â””â”€ React Query integration                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Layer 2: API (GraphQL)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GraphQL Schema (schema.graphql)            â”‚
â”‚  â”œâ”€ Types, Queries, Mutations               â”‚
â”‚  â”œâ”€ Input types, Enums                      â”‚
â”‚  â””â”€ Single source of truth                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Code Generation                            â”‚
â”‚  â”œâ”€ Backend: gqlgen â†’ Go types/resolvers   â”‚
â”‚  â””â”€ Frontend: graphql-codegen â†’ TS types   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Layer 3: Backend (Business Logic)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Gin HTTP Server                            â”‚
â”‚  â”œâ”€ Routing                                 â”‚
â”‚  â”œâ”€ Middleware (auth, logging, etc.)        â”‚
â”‚  â””â”€ GraphQL endpoint handler                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GraphQL Resolvers                          â”‚
â”‚  â”œâ”€ Query resolvers                         â”‚
â”‚  â”œâ”€ Mutation resolvers                      â”‚
â”‚  â””â”€ Business logic                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Repository Layer                           â”‚
â”‚  â”œâ”€ Database abstraction                    â”‚
â”‚  â”œâ”€ Cypher query builders                   â”‚
â”‚  â””â”€ Transaction management                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Layer 4: Database (Persistence)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Neo4j Driver                               â”‚
â”‚  â”œâ”€ Connection pooling                      â”‚
â”‚  â”œâ”€ Session management                      â”‚
â”‚  â””â”€ Cypher execution                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Neo4j Graph Database                       â”‚
â”‚  â”œâ”€ Nodes (entities)                        â”‚
â”‚  â”œâ”€ Relationships (connections)             â”‚
â”‚  â””â”€ Properties (attributes)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Code Generation Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  schema.graphql      â”‚  â† Edit GraphQL schema
â”‚  (Single Source)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â–¼                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  gqlgen              â”‚   â”‚  graphql-codegen     â”‚
â”‚  (Backend)           â”‚   â”‚  (Frontend)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                         â”‚
          â–¼                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Go Types            â”‚   â”‚  TypeScript Types    â”‚
â”‚  - models_gen.go     â”‚   â”‚  - generated.ts      â”‚
â”‚  - Resolver stubs    â”‚   â”‚  - React Query hooks â”‚
â”‚  - Input types       â”‚   â”‚  - Type guards       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                         â”‚
          â–¼                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Implement           â”‚   â”‚  Use in components   â”‚
â”‚  Resolvers           â”‚   â”‚  with type safety    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ³ Docker Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Docker Compose                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  web         â”‚  â”‚  backend     â”‚  â”‚  neo4j       â”‚ â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚ â”‚
â”‚  â”‚  Node:18     â”‚  â”‚  golang:1.21 â”‚  â”‚  neo4j:5     â”‚ â”‚
â”‚  â”‚  Vite Dev    â”‚  â”‚  Gin Server  â”‚  â”‚  Database    â”‚ â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚ â”‚
â”‚  â”‚  :5173       â”‚  â”‚  :8080       â”‚  â”‚  :7687       â”‚ â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚  :7474 (UI)  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚        â”‚                  â”‚                  â”‚         â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                           â”‚                            â”‚
â”‚                     [network]                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Volume Mounts

```
Host                     Container
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
./web/src         â†’      /app/src          (live reload)
./backend         â†’      /app              (hot reload)
neo4j_data        â†’      /data             (persistence)
```

---

## ğŸ” Authentication Flow (Future)

```
User
  â”‚
  â”œâ”€ Login with Google
  â”‚     â”‚
  â”‚     â””â”€â–º OAuth Flow
  â”‚           â”‚
  â”‚           â””â”€â–º Google Auth
  â”‚                 â”‚
  â”‚                 â””â”€â–º JWT Token
  â”‚                       â”‚
  â”‚                       â””â”€â–º Store in HTTP-only cookie
  â”‚
  â””â”€ Subsequent Requests
        â”‚
        â””â”€â–º Cookie attached
              â”‚
              â””â”€â–º Backend validates JWT
                    â”‚
                    â”œâ”€ Valid â†’ Process request
                    â”‚            â”‚
                    â”‚            â””â”€â–º Access Neo4j with user context
                    â”‚
                    â””â”€ Invalid â†’ Return 401
```

---

## ğŸ“Š Schema Design Workflow

```
Developer                    Arrows.app              Copilot/AI
    â”‚                            â”‚                        â”‚
    â”‚  1. Design visually        â”‚                        â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚                        â”‚
    â”‚                            â”‚                        â”‚
    â”‚  2. Export JSON            â”‚                        â”‚
    â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                        â”‚
    â”‚                            â”‚                        â”‚
    â”‚  3. Save to repo           â”‚                        â”‚
    â”‚  (schema/graph-models/)    â”‚                        â”‚
    â”‚                            â”‚                        â”‚
    â”‚  4. Tell Copilot           â”‚                        â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
    â”‚  "Implement model X"       â”‚                        â”‚
    â”‚                            â”‚                        â”‚
    â”‚                            â”‚  5. Read JSON          â”‚
    â”‚                            â”‚  6. Generate:          â”‚
    â”‚                            â”‚     - Migrations       â”‚
    â”‚                            â”‚     - GraphQL schema   â”‚
    â”‚                            â”‚     - Resolvers        â”‚
    â”‚                            â”‚     - Repositories     â”‚
    â”‚                            â”‚                        â”‚
    â”‚  7. Review & commit        â”‚                        â”‚
    â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚                            â”‚                        â”‚
```

---

## ğŸ§ª Testing Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend Tests (Vitest)                    â”‚
â”‚  â”œâ”€ Component tests                         â”‚
â”‚  â”œâ”€ Hook tests                              â”‚
â”‚  â”œâ”€ Integration tests                       â”‚
â”‚  â””â”€ Mock GraphQL responses                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend Tests (Go testing)                 â”‚
â”‚  â”œâ”€ Unit tests (repositories)               â”‚
â”‚  â”œâ”€ Integration tests (resolvers)           â”‚
â”‚  â”œâ”€ Database tests (with test Neo4j)        â”‚
â”‚  â””â”€ Table-driven tests                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  E2E Tests (Future)                         â”‚
â”‚  â”œâ”€ Full user flows                         â”‚
â”‚  â”œâ”€ Real database                           â”‚
â”‚  â””â”€ Browser automation                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ Deployment Architecture (CI/CD)

```
Developer Push
      â”‚
      â–¼
GitHub Repository
      â”‚
      â”œâ”€â–º GitHub Actions (CI)
      â”‚      â”‚
      â”‚      â”œâ”€ Run backend tests
      â”‚      â”œâ”€ Run frontend tests
      â”‚      â”œâ”€ Check linting
      â”‚      â”œâ”€ Build Docker images
      â”‚      â””â”€ Calculate coverage
      â”‚
      â””â”€â–º GitHub Actions (CD)
             â”‚
             â”œâ”€ Build production images
             â”œâ”€ Push to container registry
             â””â”€ Deploy to environment
                   â”‚
                   â”œâ”€ Development
                   â”œâ”€ Staging
                   â””â”€ Production
```

---

## ğŸ“ˆ Scalability Considerations

### Horizontal Scaling

```
                    Load Balancer
                         â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                â–¼                â–¼
    Backend 1        Backend 2        Backend 3
        â”‚                â”‚                â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â–¼
                   Neo4j Cluster
                 (Causal Cluster)
```

### Caching Strategy

```
Frontend
    â”‚
    â””â”€â–º TanStack Query Cache (in-memory)
            â”‚
            â””â”€â–º HTTP Request
                    â”‚
                    â–¼
                Backend
                    â”‚
                    â”œâ”€â–º Redis Cache (future)
                    â”‚
                    â””â”€â–º Neo4j Database
```

---

## ğŸ¯ Key Design Principles

1. **Separation of Concerns**
   - Frontend: Presentation
   - Backend: Business logic
   - Database: Persistence

2. **Type Safety**
   - TypeScript on frontend
   - Go on backend
   - GraphQL schema as contract

3. **Code Generation**
   - Reduce boilerplate
   - Maintain consistency
   - Catch errors early

4. **Containerization**
   - Consistent environments
   - Easy deployment
   - Scalable infrastructure

5. **Testing**
   - Unit tests
   - Integration tests
   - E2E tests (future)

---

This architecture provides a solid foundation for building scalable, maintainable full-stack applications with graph database capabilities.
